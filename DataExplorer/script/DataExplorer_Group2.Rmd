---
title: "DataExplorer Package"
author: "Cynthia Petrossian, Sally Heo, Tadeo Zuniga, Heather Carstensen"
date: "4/9/2022"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
    theme: sandstone
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.path = "../output/", echo = TRUE, warning = FALSE, message = FALSE)
```

## Load libraries and data

```{r}
library(here)
library(DataExplorer)
library(tidyverse)

chem <- read_csv(here("DataExplorer", "data", "chemicaldata_maunalua.csv"))
```

## plot_bar Function

If you would like to see the frequency distribution of discrete variables, use the plot_bar function. This will display bar charts showing the frequency of each character value, faceted by column. 

By default, this function will ignore any columns that have more than 50 different character values. This threshold can be altered with the argument "maxcat = "  


```{r plot_bar_1}
plot_bar(chem)  #make bar plots for all discrete variables using the chem data
```

Some other useful arguments include:

* [by = ], allows you to map color within the bars to a second discrete variable. The default setting creates stacked bars with colors corresponding to that variable (see example below). 
* [by_position = ""] allows you to change the position argument if you are creating  bars "by" another variable. The default is "fill". Another option is "dodge", which will instead display grouped bars side-by-side rather than stacked bars (see example below).
* [title = ""] allows you to add a title to the set of plots.
* [ggtheme = ] allows you to apply a ggplot2 theme to the plots.
* [nrow = ] allows you to change the number of plots displayed per row. The default is 3 per row (3L). 
* [ncol = ] allows you to change the number of plots per column. The default is 3 per column (3L).

If you would like to see the distribution of another discrete column within the bars, you can add by = "column name", and now color within each bar will be mapped to that second discrete variable. Let's also add a ggplot2 theme. 

```{r plot_bar_2}
plot_bar(chem,  #Make bar plots for discrete variables with the chem data
         by = "Site",  #Map colors within the bars to Site
         theme = theme_bw())  #Change theme
```

Finally, let's change the "by_position" to "dodge" so that we see separate grouped bars instead of stacked bars for the second variable. 

```{r plot_bar_3}
plot_bar(chem, 
         by = "Site", 
         theme = theme_bw(), 
         by_position = "dodge")  #Change position to dodge, making grouped bars. 
```



## plot_boxplot Function

The plot_boxplot feature allows you to look at the distribution of numeric values for a chosen discrete column, so this is a way to compare discrete and numeric data. Let's look at the distributions of all numeric columns when we organize the data by Zone.

```{r plot_boxplot}
plot_boxplot(chem,  #Make boxplots using chem data frame
             by = "Zone")  #Organize by the discrete variable Zone
```

Now we see all the values for "Zone" displayed on the y-axis, and continuous numeric values for each plot are on the x-axis. This function can help the user you to identify patterns across variables. For example, the Near Spring shows different value distributions than the other zones for several of the continuous variables, including NN (Nitrate+nitrite), percent_sgd (Relative amount of submarine groundwater discharge in the water), pH, Phosphate, Salinity, Silicate, and TA (Total alkalinity). 

Many of the same arguments listed above for plot_bar can also be used here for plot_boxplot. 

```{r}
plot_str(chem)
```

## QQ-Plot
Quantile-Quantile plot explains the variance at a chosen distribution, example the variance if the data were to be normally distributed. 

**Arguments**

* **data:** input data

* **by:** feature name to be broken down by. If selecting a continuous feature, it will be grouped by 5 equal ranges, otherwise, all existing categories for a discrete feature. Default is NULL.

* **sampled_rows:** number of rows to sample if data has too many rows. Default is all rows, which means do not sample.

* **geom_qq_args:** a list of other arguments to geom_qq

* **geom_qq_line_args:** a list of other arguments to 

* **geom_qq_line:** title plot title

* **ggtheme:** complete ggplot2 themes. Default is *theme_gray*.

* **theme_config:** a list of configurations to be passed to *theme*

* **nrow:** number of rows per page. Default is 3.

* **ncol:** number of columns per page. Default is 3.

* **parallel:** enable parallel? Default is FALSE.

```{r qq_plot}
qq_data <- chem[, c("Season", "Temp_in")] #plot basic qqplot, showing the 
plot_qq(qq_data, sampled_rows = 1000L) 
```

```{r qq_plot2}
# Step 2 log transform data to fit the regression line
log_qq_data <- update_columns(qq_data, c("Temp_in"), function(x) log(x + 1)) #update columns to long parameters giving a better "fit" line 
plot_qq(log_qq_data[,c("Season", "Temp_in")], sampled_rows = 1000L)

```

## Principal Component Analysis (PCA-Plot)
```{r PCA}



```

```{r str_plot,fig.width = 2, fig.height=2, fig.asp=1.0, fig.align='center'}


DataExplorer::plot_str(mtcars, print_network = TRUE)


```




